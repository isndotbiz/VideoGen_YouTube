================================================================================
                   SCRIPT CLEANING FOR ELEVENLABS TTS
                          QUICK REFERENCE
================================================================================

PROBLEM
-------
Video scripts have cues that ElevenLabs reads aloud:
  [VISUAL: Title]  ← Should NOT be spoken
  [PAUSE: 2]       ← Should NOT be spoken
  [TIME: 00:30]    ← Should NOT be spoken
  [AWARD: Best]    ← Should NOT be spoken

SOLUTION
--------
Use script_cleaner_for_tts.py to remove all cues before sending to ElevenLabs.


QUICK START (3 STEPS)
---------------------

Step 1: Copy Module
  → Copy script_cleaner_for_tts.py to your project root

Step 2: Update Code
  BEFORE:  script = get_script()
           audio = generate(script)

  AFTER:   from script_cleaner_for_tts import clean_script_for_tts
           script = get_script()
           audio = generate(clean_script_for_tts(script))

Step 3: Test
  python script_cleaner_for_tts.py


BASIC USAGE
-----------

# Option A: Simple one-liner
from script_cleaner_for_tts import clean_script_for_tts
clean_text = clean_script_for_tts(raw_script)

# Option B: With validation
from script_cleaner_for_tts import ScriptCleaner
cleaned = ScriptCleaner.clean_text(script)
validation = ScriptCleaner.validate_cleaned_text(script, cleaned)
assert validation['is_valid']


CUES REMOVED
------------

Visual/Production:
  [VISUAL: ...]      [PAUSE: ...]       [B-ROLL: ...]
  [AUDIO: ...]       [MUSIC: ...]       [SOUND: ...]
  [ANIMATION: ...]   [EMPHASIS: ...]    [TRANSITION: ...]

Timing:
  [TIME: 00:30]      [TIMESTAMP: 1:45]  (0:30-1:00)

Navigation:
  [LINK: ...]        [URL: ...]         [CUT: ...]

Interaction:
  [AWARD: ...]       [OK]               [DONE]
  [START]            [END]              [ACK]

Generic:
  Any [WORD] or [WORD: content] patterns


VALIDATION EXAMPLE
------------------

from script_cleaner_for_tts import ScriptCleaner

script = "Text with [VISUAL: cue] and [TIME: 00:30]"
cleaned = ScriptCleaner.clean_text(script)

results = ScriptCleaner.validate_cleaned_text(script, cleaned)

print(f"Cues found: {results['cues_found']}")
print(f"Valid: {results['is_valid']}")

Output:
  Cues found: 2
  Valid: True


API REFERENCE
-------------

clean_script_for_tts(text, verbose=False)
  → Cleans and returns text

ScriptCleaner.clean_text(text, verbose=False)
  → Same as above, more explicit

ScriptCleaner.clean_file(input_path, output_path=None, verbose=False)
  → Clean a file, optionally save result

ScriptCleaner.find_cues(text)
  → Find all cues WITHOUT removing them
  → Returns: [(text, position, pattern), ...]

ScriptCleaner.validate_cleaned_text(original, cleaned)
  → Check if cleaning was successful
  → Returns: {'is_valid': bool, 'cues_found': int, ...}


INTEGRATION EXAMPLES
--------------------

Example 1: ElevenLabs API Call
  from script_cleaner_for_tts import clean_script_for_tts

  clean_text = clean_script_for_tts(raw_script)
  audio = client.text_to_speech.convert(
      text=clean_text,
      voice_id="21m00Tcm4TlvDq8ikWAM"
  )

Example 2: With Logging
  from script_cleaner_for_tts import ScriptCleaner

  cues = ScriptCleaner.find_cues(script)
  print(f"Found {len(cues)} cues")

  cleaned = ScriptCleaner.clean_text(script, verbose=True)
  audio = generate(cleaned)

Example 3: Batch Processing
  from pathlib import Path
  from script_cleaner_for_tts import ScriptCleaner

  for script_file in Path("scripts").glob("*.md"):
      ScriptCleaner.clean_file(
          str(script_file),
          output_path=f"cleaned/{script_file.name}"
      )

Example 4: Validation Before Generation
  from script_cleaner_for_tts import ScriptCleaner

  cleaned = ScriptCleaner.clean_text(script)
  validation = ScriptCleaner.validate_cleaned_text(script, cleaned)

  if not validation['is_valid']:
      print(f"WARNING: {validation['remaining_brackets']} patterns remain!")
  else:
      audio = generate(cleaned)


BEFORE & AFTER
--------------

BEFORE (Problems):
  ✗ Script: "Start. [VISUAL: animation] Begin. [PAUSE: 2] End. [TIME: 00:30]"
  ✗ Sent to ElevenLabs with cues included
  ✗ Output: "Start. Visual animation. Begin. Pause 2. End. Time 00 30."
  ✗ Result: Unlistenable, unprofessional

AFTER (Fixed):
  ✓ Script: "Start. [VISUAL: animation] Begin. [PAUSE: 2] End. [TIME: 00:30]"
  ✓ Cleaned: "Start. Begin. End."
  ✓ Sent to ElevenLabs
  ✓ Output: "Start. Begin. End."
  ✓ Result: Professional, clean narration


TESTING
-------

Test the module:
  python script_cleaner_for_tts.py

Expected output includes:
  - Original script
  - List of found cues
  - Cleaned script
  - Validation: "READY FOR TTS? YES"

Test full pipeline:
  python elevenlabs_with_script_cleaning.py

Generates:
  - output/narration_cleaned.mp3
  - output/narration_script_cleaned.txt
  - output/narration_metadata.txt


TROUBLESHOOTING
---------------

Q: "Remaining bracket patterns found!"
A: Some cues weren't matched. Check the log for patterns, then add them
   to CUE_PATTERNS in script_cleaner_for_tts.py

Q: "Text too short after cleaning"
A: Not enough narration text in script. Check the extracted text is correct.

Q: "ELEVENLABS_API_KEY not set"
A: Create .env file with: ELEVENLABS_API_KEY=your_key_here

Q: Where are my files?
A: All in D:\workspace\VideoGen_YouTube\
   - script_cleaner_for_tts.py (core module)
   - elevenlabs_with_script_cleaning.py (full pipeline)
   - SCRIPT_CLEANING_GUIDE.md (detailed docs)
   - INTEGRATION_EXAMPLES.md (code examples)
   - SOLUTION_SUMMARY.md (complete overview)


PERFORMANCE
-----------

100-word script:    <10ms
1000-word script:   <50ms
Validation:         <10ms
ElevenLabs API:     30-60 seconds


FILES YOU GOT
-------------

script_cleaner_for_tts.py
  → Core cleaning module, use this directly

elevenlabs_with_script_cleaning.py
  → Full pipeline with ElevenLabs integration

SCRIPT_CLEANING_GUIDE.md
  → Detailed documentation and API reference

INTEGRATION_EXAMPLES.md
  → Copy-paste code examples for various scenarios

SOLUTION_SUMMARY.md
  → Complete overview and background

SCRIPT_CLEANING_QUICK_REFERENCE.txt
  → This file


NEXT STEPS
----------

1. Copy script_cleaner_for_tts.py to your project
2. Run: python script_cleaner_for_tts.py
3. Verify: Output says "READY FOR TTS? YES"
4. Update your code (1 line: clean_script_for_tts(script))
5. Test with your actual scripts
6. Listen to generated narration
7. Commit changes


KEY INSIGHT
-----------

Send CLEAN text to ElevenLabs, not raw text with cues.

Raw:    "Hello [VISUAL: animation] world [TIME: 00:30]"
Clean:  "Hello world"

Spoken: "Hello world"  ← Professional ✓


CONTACT / HELP
--------------

For detailed information, see:
  - SOLUTION_SUMMARY.md (overview)
  - SCRIPT_CLEANING_GUIDE.md (API reference)
  - INTEGRATION_EXAMPLES.md (code examples)

Or run:
  python script_cleaner_for_tts.py (test)
  python elevenlabs_with_script_cleaning.py (full pipeline)


================================================================================
                            YOU'RE ALL SET!
================================================================================

Status: PRODUCTION READY
Last Updated: 2024-12-24
